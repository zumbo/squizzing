<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/main :: layout(~{::title}, ~{::content})}">
<head>
    <title>Admin Dashboard - Squizzing</title>
</head>
<body>
<div th:fragment="content">
    <h1 class="mb-4">Admin Dashboard</h1>

    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">Rounds</h5>
                    <p class="display-4" th:text="${#lists.size(rounds)}">0</p>
                    <a th:href="@{/admin/rounds}" class="btn btn-primary">Manage Rounds</a>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">Users</h5>
                    <p class="display-4" th:text="${#lists.size(users)}">0</p>
                    <a th:href="@{/admin/users}" class="btn btn-primary">Manage Users</a>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">Quick Actions</h5>
                    <div class="d-grid gap-2">
                        <a th:href="@{/admin/rounds/new}" class="btn btn-outline-primary">New Round</a>
                        <a th:href="@{/scoreboard}" class="btn btn-outline-secondary">View Scoreboard</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Active Round -->
    <div class="card mb-4" th:if="${#lists.size(rounds) > 0}">
        <div class="card-header">
            <h5 class="mb-0">Recent Rounds</h5>
        </div>
        <div class="card-body">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Dates</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="round : ${rounds}" th:if="${roundStat.index < 5}">
                        <td th:text="${round.name}">Round Name</td>
                        <td>
                            <span th:text="${#temporals.format(round.startDate, 'dd.MM.yyyy')}">01.01</span>
                            -
                            <span th:text="${#temporals.format(round.endDate, 'dd.MM.yyyy')}">07.01</span>
                        </td>
                        <td>
                            <span th:if="${round.active}" class="badge bg-success">Active</span>
                            <span th:unless="${round.active}" class="badge bg-secondary">Inactive</span>
                        </td>
                        <td>
                            <a th:href="@{/admin/rounds/{id}/questions(id=${round.id})}" class="btn btn-sm btn-outline-primary">
                                Questions
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
